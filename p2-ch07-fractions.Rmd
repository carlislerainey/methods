---
output:
  html_document: default
  pdf_document: default
---

# Fractions

We can imagine lots of lists that are not numbers. This lists contain qualitative variables. We might have a lists that contains the class of each student in the class. Rather than contain numbers, this list contains values like "Freshman," "Sophomore," "Junior," and "Senior." 

Similarly, at the end of the semester, I have a list of grades. The most important list is Letter Grades which contains values like A, B, C, D, and F. We might have lists that contain partisanship, ideology, regime type, and so on. 

When we deal with lists that contain not-numbers, we cannot use the average because we cannot sum the not-numbers. 

Instead, we use fractions. We choose a particular category and compute the fraction of a list that fall into that category. Note that this "particular category"" might contain several values, such as freshman or sophomore (underclassmen) or A, B, or C (passing grades). For example, we say a certain fraction of the class are freshman. Or we say that a certain fraction of a class received an A, B, or C.

## Calculating Fractions

To compute a fraction, simply count the number of entries in the list that fall in the particular category and divide that by the total number of entries.

$$\text{fraction in the category} = \dfrac{\text{number of entries that fall into the category}}{\text{total number of entries}}$$

For example, take the 

```{r echo = FALSE, results = 'asis'}
library(knitr)
class <- c("Freshman", "Sophomore", "Junior", "Senior")
grade <- c("A", "B", "C", "D", "F")

set.seed(12345)
df <- data.frame(Class = sample(class, size = 10, replace = TRUE), 
                 Grade = sample(grade, size = 10, replace = TRUE, prob = c(1, 2, 3, 1, 1)))
kable(t(df), caption = "Class standing and letter grades of 15 hypothetical students.")
```

**Example**: Compute the percent of sophomores in the class. 

> First count the number of sophomores in the list. We have `r sum(df$Class == "Sophomore")`. Next, count the number of total students in the class. We have `r length(df$Class)`. Finally, divide the number of sophomores by total number of students. We have $\frac{`r sum(df$Class == "Sophomore")`}{`r length(df$Class)`}$.

> If we want, we can leave this fraction as is, reduce it to a simpler form, or convert it to a percent. It's usually easiest to convert the final fraction to a percent. in this cases, we have `r round(100*sum(df$Class == "Sophomore")/length(df$Class))`%.

**Exercises**: 

1. Compute the percent of students in the class that are sophomores. Compute the percent that are juniors or seniors.
1. Compute the percent of students that received an F. Compute the percent that received an A or a B.
1. Compute the percent of seniors that received an A. Compute the percent of freshmen that received an A.

## The Mathematics of Fractions

The approach above to compute a fraction works perfectly. However, it does not clearly connect to the past or future discussion of averages. 

If we can connect fractions and averages, then we can apply the same theory to two concepts, cutting our theory and formulas by half.

To connect fractions and averages, we simply convert the list of not-numbers into a list of numbers. To create the new list of numbers, simply assign the number 1 to the entries that fall into the particular category. Assign zero to the other entries. This creates a list of numbers that contains only 0s and 1s. I call this a 0-1 list. The fraction is simply the average of this 0-1 list. 

**Note: We can think of a fraction as an average of a 0-1 list.**

Notice that a fraction is a special type of average: it is an average of a 0-1 list that you create by replacing the entries that fall into the categories of interest with 1s and replacing the other entries with zero. 

**Exercise**: Suppose Iâ€™m evaluating the admissions process so I put together a list containing the gender of the admitted graduate students. This list is M, M, F, F, M, M, M, M, F, M, and M.

Try two ways to calculating the fraction of women admitted. 
1. The inital way I described: count the number of women in the list and divide that by the total number of entries.
2. The more mathematical way I described: write down the implied 0-1 list (replace Woman with 1 and everything else with 0) and then average the list. 
Are these two approaches different or the same? Elaborate?

If we understand fractions as a special type of average, then anything we say about averages applies to fractions too!

## SD of a 0-1 List

If we convert a list of qualitative values into a 0-1 list, then we can compute the SD of the new list. Just like with other lists of numbers, the SD of a 0-1 list is the r.m.s. of the deviations from average. We can compute the SD the usual way. But the usual way takes time, and if we have a 0-1 list, we have a shortcut.

$$\text{SD of a 0-1 list} = \sqrt{\text{ave. of list} \times (1 - \text{ave. of list})}$$

Notice that the average of a 0-1 list determines the SD *exactly*. If the average of a 0-1 list is 0.25, then the SD is exactly $\sqrt{0.2 \times 0.8} = 0.4$. If the average of a 0-1 list is 0.5, then the SD is exactly $\sqrt{0.5 \times 0.5} = 0.5$. 

Because of this, we do not often discuss the variation when working with lists of qualitative values--the fraction contains all the information we need.

However, this shortcut will help us later. 

## Properties of Fractions

We can say three things about fractions: 

1. They are at least 0 and at most 1. If none of the entries fall into the category, then the top (numerator) of the fraction equals 0, and therefore the whole fraction equals 0. If all of the entries fall into the category, then the top of the fraction (numerator) equals the bottom of the fraction (denominator), and thefore the whole fraction equals 1.
2. The fraction that do not fall into a category is 1 minus the fraction that fall into a category. 
3. It is easier to talk about percents. After we finish all our calculations, we usually convert fractions to percents by multiplying the fraction by 100%. It usually round this percent to the nearest whole percent.

## Review Exercises

1. Table \@ref(tab:govtcontroldata) shows the partisan control of each branch of the 49 U.S. states (excluding Nebraska) in 2011. Compute the fraction of states with a Republican governor. Repeat for house and senate. Is the fraction of Democratic governors, houses, and senates necessarily $1 - \text{fraction Republican}$? Why or why not? Which party has most control in the U.S. states? Can you think of any ways that control of state governments affect national politics? 

```{r govtcontroldata, echo=FALSE, message=FALSE, warning=FALSE, paged.print=TRUE}
# load packages
library(tidyverse)
library(magrittr)

# load and clean data for example
df <- read_rds("data/state-governments.rds") %>%
  filter(year == 2011) %>%
  select(-year) %>%
  arrange(state)

# print md table
knitr::kable(df, align = "c", caption = "The partisan control of each branch of the 49 (excluding Nebraska) state governments in 2011.")
```
